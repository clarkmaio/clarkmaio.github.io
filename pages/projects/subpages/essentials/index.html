<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta name="generator" content="mkdocs-1.6.1, mkdocs-terminal-4.6.0">
     
     
    <link rel="icon" type="image/png" sizes="192x192" href="../../../../img/android-chrome-192x192.png" />
<link rel="icon" type="image/png" sizes="512x512" href="../../../../img/android-chrome-512x512.png" />
<link rel="apple-touch-icon" sizes="180x180" href="../../../../img/apple-touch-icon.png" />
<link rel="shortcut icon" type="image/png" sizes="48x48" href="../../../../img/favicon.ico" />
<link rel="icon" type="image/png" sizes="16x16" href="../../../../img/favicon-16x16.png" />
<link rel="icon" type="image/png" sizes="32x32" href="../../../../img/favicon-32x32.png" />


    
 
<title>Essentials - clarkmaio</title>


<link href="../../../../css/fontawesome/css/fontawesome.min.css" rel="stylesheet">
<link href="../../../../css/fontawesome/css/solid.min.css" rel="stylesheet">
<link href="../../../../css/normalize.css" rel="stylesheet">
<link href="../../../../css/terminal.css" rel="stylesheet">
<link href="../../../../css/theme.css" rel="stylesheet">
<link href="../../../../css/theme.tile_grid.css" rel="stylesheet">
<link href="../../../../css/theme.footer.css" rel="stylesheet">
<!-- [{'scheme': 'default', 'toggle': {'icon': 'material/lightbulb', 'name': 'Switch to dark mode'}, 'primary': 'white'}, {'scheme': 'slate', 'toggle': {'icon': 'material/lightbulb-outline', 'name': 'Switch to light mode'}, 'primary': 'white'}] color palette -->
<link href="../../../../css/palettes/[{'scheme': 'default', 'toggle': {'icon': 'material/lightbulb', 'name': 'Switch to dark mode'}, 'primary': 'white'}, {'scheme': 'slate', 'toggle': {'icon': 'material/lightbulb-outline', 'name': 'Switch to light mode'}, 'primary': 'white'}].css" rel="stylesheet">

<!-- page layout -->
<style>
/* initially set page layout to a one column grid */
.terminal-mkdocs-main-grid {
    display: grid;
    grid-column-gap: 1.4em;
    grid-template-columns: auto;
    grid-template-rows: auto;
}

/*  
*   when side navigation is not hidden, use a two column grid.  
*   if the screen is too narrow, fall back to the initial one column grid layout.
*   in this case the main content will be placed under the navigation panel. 
*/
@media only screen and (min-width: 70em) {
    .terminal-mkdocs-main-grid {
        grid-template-columns: 4fr 9fr;
    }
}</style>



    
    <link href="../../../../stylesheets/link.css" rel="stylesheet"> 
    <link href="../../../../stylesheets/footer.css" rel="stylesheet"> 
    <link href="../../../../stylesheets/header.css" rel="stylesheet">  
    
    

    
    <!-- search css support -->
<link href="../../../../css/search/bootstrap-modal.css" rel="stylesheet">
<!-- search scripts -->
<script>
    var base_url = "../../../..",
    shortcuts = "{}";
</script>
<script src="../../../../js/jquery/jquery-1.10.1.min.js" defer></script>
<script src="../../../../js/bootstrap/bootstrap.min.js" defer></script>
<script src="../../../../js/mkdocs/base.js" defer></script>
    
    
    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.0/es5/tex-mml-chtml.js"></script>
    
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    
    <script src="https://unpkg.com/mermaid@10.0.2/dist/mermaid.esm.min.mjs"></script>
    
    <script src="../../../../search/main.js"></script>
    

    
</head>

<body class="terminal"><div class="container">
    <div class="terminal-nav">
        <header class="terminal-logo">
            <div id="mkdocs-terminal-site-name" class="logo terminal-prompt"><a href="/" class="no-style">clarkmaio</a></div>
        </header>
        
        <nav class="terminal-menu">
            
            <ul vocab="https://schema.org/" typeof="BreadcrumbList">
                
                
                
                
                
                
                
                
                
                    
                    


<li property="itemListElement" typeof="ListItem">
    <a href="#" class="menu-item" data-toggle="modal" data-target="#mkdocs_search_modal" property="item" typeof="SearchAction">
        <i aria-hidden="true" class="fa fa-search"></i> <span property="name">Search</span>
    </a>
    <meta property="position" content="0">
</li>
                    
            </ul>
            
        </nav>
    </div>
</div>
        
    <div class="container">
        <div class="terminal-mkdocs-main-grid"><aside id="terminal-mkdocs-side-panel"><nav>
  
    <ul class="terminal-mkdocs-side-nav-items">
        
          



<li class="terminal-mkdocs-side-nav-li">
    
    
        
        

        
            
    
        
        
            
            
            <span class="
        
    

    terminal-mkdocs-side-nav-item terminal-mkdocs-side-nav-section-no-index">it's me, clark</span>
        
    
    
        
      
        
            <ul class="terminal-mkdocs-side-nav-li-ul">
        
            
            

             
                <li class="terminal-mkdocs-side-nav-li-ul-li">
    
        
        
            <a class="

    terminal-mkdocs-side-nav-item" href="../../../..">ciau</a>
        
    
    </li>
            
            
    </ul>
        
    
  </li>
        
          



<li class="terminal-mkdocs-side-nav-li">
    
    
        
        

        
            
    
        
        
            
            
            <span class="
        
    

    terminal-mkdocs-side-nav-item terminal-mkdocs-side-nav-section-no-index">projects</span>
        
    
    
        
      
        
            <ul class="terminal-mkdocs-side-nav-li-ul">
        
            
            

             
                <li class="terminal-mkdocs-side-nav-li-ul-li">
    
        
        
            <a class="

    terminal-mkdocs-side-nav-item" href="../../">Index</a>
        
    
    </li>
            
            
    </ul>
        
    
  </li>
        
          



<li class="terminal-mkdocs-side-nav-li">
    
    
        
        

        
            
    
        
        
            
            
            <span class="
        
    

    terminal-mkdocs-side-nav-item terminal-mkdocs-side-nav-section-no-index">hobbies</span>
        
    
    
        
      
        
            <ul class="terminal-mkdocs-side-nav-li-ul">
        
            
            

             
                <li class="terminal-mkdocs-side-nav-li-ul-li">
    
        
        
            <a class="

    terminal-mkdocs-side-nav-item" href="../../../hobbies/">Index</a>
        
    
    </li>
            
            
    </ul>
        
    
  </li>
        
          



<li class="terminal-mkdocs-side-nav-li">
    
    
        
        

        
            
    
        
        
            
            
            <span class="
        
    

    terminal-mkdocs-side-nav-item terminal-mkdocs-side-nav-section-no-index">useful!</span>
        
    
    
        
      
        
            <ul class="terminal-mkdocs-side-nav-li-ul">
        
            
            

             
                <li class="terminal-mkdocs-side-nav-li-ul-li">
    
        
        
            <a class="

    terminal-mkdocs-side-nav-item" href="../../../useful%21/">Index</a>
        
    
    </li>
            
            
    </ul>
        
    
  </li>
        
    </ul>
  
</nav><hr>
<nav>
    <ul>
        <li><a href="#parsermanager">ParserManager</a></li>
        <li><a href="#datacatalog">DataCatalog</a></li>
        <li><a href="#context">Context</a></li>
        <li><a href="#pipelines-and-nodes">Pipelines and nodes</a></li>
        <li><a href="#datatransformer">DataTransformer</a></li>
        <li><a href="#decorators">Decorators</a></li>
        
    </ul>
</nav>
</aside>
            <main id="terminal-mkdocs-main-content">
    
    
    
    
    
        
    

<section id="mkdocs-terminal-content">
    <p>After having worked on very different projects I've realised that still there are objects that I end up implementing every time.</p>
<p>I'v decided to implement them once and import them from a "general" repository.</p>
<p>In this page I will present main tools with few examples.</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>You can find this <em>tool box</em> in the github repository <a href="https://github.com/clarkmaio/clarkpy_essentials"><strong>clarkpy_essentials</strong></a>.</p>
<p>To install the repository:
<div class="highlight"><pre><span></span><code>pip install git+https://github.com/clarkmaio/clarkpy_essentials.git
</code></pre></div></p>
</div>
<h2 id="parsermanager"><strong>ParserManager</strong></h2>
<p>Let's start from a dummy one: the <code>ParserManager</code>.</p>
<p>I just do not like to edit parser from a <code>.py</code> file</p>
<p><code>ParserManager</code> is just a class that parse a <code>yaml</code> file and build a parser using the standard library <code>argparser</code>.</p>
<p>Parser keys will be stored in a dictionary ready to be queried.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Example of parser_conf.yml</span>
<span class="nt">variable_int</span><span class="p">:</span>
<span class="w">  </span><span class="nt">default</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">9</span>
<span class="w">  </span><span class="nt">help</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;This</span><span class="nv"> </span><span class="s">variable</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">an</span><span class="nv"> </span><span class="s">integer&#39;</span>

<span class="nt">variable_str</span><span class="p">:</span>
<span class="w">  </span><span class="nt">default</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">abc</span>
<span class="w">  </span><span class="nt">help</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;This</span><span class="nv"> </span><span class="s">variable</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">string&#39;</span>

<span class="nt">variable_nargs</span><span class="p">:</span>
<span class="w">  </span><span class="nt">default</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&#39;a&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;b&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;c&#39;</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="nt">nargs</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;*&#39;</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">clarkpy_essentials</span> <span class="kn">import</span> <span class="n">ParserManager</span>

<span class="n">PARSER_CONF</span> <span class="o">=</span> <span class="err">`</span><span class="o">/</span><span class="n">path_to_parser</span><span class="o">/</span><span class="n">parser_conf</span><span class="o">.</span><span class="n">yml</span><span class="err">`</span>
<span class="n">parser_args</span> <span class="o">=</span> <span class="n">ParserManager</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">path</span> <span class="o">=</span> <span class="n">PARSER_CONF</span><span class="p">)</span>

<span class="c1"># parser_args is now just a dictionary</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;variable_int&#39;</span><span class="p">,</span> <span class="n">parser_args</span><span class="p">[</span><span class="s1">&#39;variable_int&#39;</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;variable_nargs&#39;</span><span class="p">,</span> <span class="n">parser_args</span><span class="p">[</span><span class="s1">&#39;variable_nargs&#39;</span><span class="p">])</span>
</code></pre></div>
<h2 id="datacatalog"><strong>DataCatalog</strong></h2>
<p>This class is nothing but an huge <em>if/else</em> function to handle different type of dataset.</p>
<p>The idea has been stolen directly from <a href="https://docs.kedro.org/en/stable/data/index.html"><strong>kedro</strong></a> than implement a very similar structure.
In <strong>kedro</strong> the user write down a yaml file to map dataset to a label. The dataset can be then loaded in pipeline simply using the label as input.</p>
<p>Since I was looking for something more explicit and a tool that could be used outside a <strong>kedro</strong> pipeline I've implemented the <code>DataCatalog</code> class.</p>
<p>It is important to specify for each label the parameters:</p>
<ul>
<li><code>type</code>: namely the way the dataset will be loaded. Can be <code>pandas.csv</code>, <code>pandas.excel</code>, <code>pandas.hdf</code>, <code>pandas.parquet</code>, <code>polars.csv</code>, <code>polars.parquet</code>,<code>yaml</code>, <code>json</code>, <code>torch</code>, <code>pickle</code></li>
<li><code>filepath</code>: the path to the file. By default this is a relative path that will be appended to <code>source_path</code> defined in the constructor. You can refer to an absolute path using the prefix <code>@abs:</code></li>
<li><code>load_kwargs</code>: additional paramters that will be passed to loader fucntion as kwargs</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="c1"># Example of a data catalog yml</span>
<span class="nt">PandasDataset</span><span class="p">:</span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pandas.csv</span>
<span class="w">    </span><span class="nt">filepath</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dataset/csv_dataset.csv</span>
<span class="w">    </span><span class="nt">load_kwargs</span><span class="p">:</span>
<span class="w">        </span><span class="nt">sep</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;,&#39;</span>

<span class="nt">PolarsDataset</span><span class="p">:</span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">polars.parquet</span>
<span class="w">    </span><span class="nt">filepath</span><span class="p">:</span><span class="w"> </span><span class="err">@</span><span class="l l-Scalar l-Scalar-Plain">abs:/home/user/dataset/parquet_dataset.parquet</span>

<span class="nt">UrlPandasDataset</span><span class="p">:</span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pandas.csv</span>
<span class="w">    </span><span class="nt">filepath</span><span class="p">:</span><span class="w"> </span><span class="err">@</span><span class="l l-Scalar l-Scalar-Plain">abs:https://raw.githubusercontent.com/cs109/2014_data/master/countries.csv</span>
<span class="w">    </span><span class="nt">load_kwargs</span><span class="p">:</span>
<span class="w">        </span><span class="nt">sep</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;,&#39;</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">clarkpy_essentials</span> <span class="kn">import</span> <span class="n">DataCatalog</span>

<span class="c1"># Initialize the datacatalog specifying the catalog.yml path and the source path that will be used to load datasets.</span>
<span class="n">SOURCE_PATH</span> <span class="o">=</span> <span class="s1">&#39;/home/user&#39;</span>
<span class="n">CATALOG_PATH</span> <span class="o">=</span> <span class="s1">&#39;/home/user/catalog.yml&#39;</span>
<span class="n">dc</span> <span class="o">=</span> <span class="n">DataCatalog</span><span class="p">(</span><span class="n">catalog</span><span class="o">=</span><span class="n">CATALOG_PATH</span><span class="p">,</span> <span class="n">source_path</span> <span class="o">=</span> <span class="n">SOURCE_PATH</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Pandas Dataset&#39;</span><span class="p">,</span> <span class="n">dc</span><span class="p">(</span><span class="s1">&#39;PandasDataset&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Polars Dataset&#39;</span><span class="p">,</span> <span class="n">dc</span><span class="p">(</span><span class="s1">&#39;PolarsDataset&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;URL Pandas Dataset&#39;</span><span class="p">,</span> <span class="n">dc</span><span class="p">(</span><span class="s1">&#39;UrlPandasDataset&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span>
</code></pre></div>
<h2 id="context"><strong>Context</strong></h2>
<p>This is a very trivial class. The only purpose it to store global senttings and variables as properties of a class.</p>
<p>Whatever you pass to the constructor of this class will be trasformed in a property.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code>catalog</code> is a privileged key that is ment to store a <code>DataCatalog</code> instance. It is privileged in the sense that whatever is stored in this key will be treated as <code>DataCatalog</code> intance in <code>Pipeline</code> (see below).</p>
</div>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">clarkpy_essentials</span> <span class="kn">import</span> <span class="n">Context</span>

<span class="n">global_vars</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;GLOBAL&#39;</span><span class="p">:</span> <span class="mi">100</span><span class="p">}</span>
<span class="n">context</span> <span class="o">=</span> <span class="n">Context</span><span class="p">(</span><span class="n">parser</span><span class="o">=</span><span class="n">parser_args</span><span class="p">,</span> <span class="n">global_vars</span><span class="o">=</span><span class="n">global_vars</span><span class="p">,</span> <span class="n">catalog</span><span class="o">=</span><span class="n">dc</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">context</span><span class="o">.</span><span class="n">parser</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">context</span><span class="o">.</span><span class="n">global_vars</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">context</span><span class="o">.</span><span class="n">catalog</span><span class="p">)</span>
</code></pre></div>
<h2 id="pipelines-and-nodes"><strong>Pipelines and nodes</strong></h2>
<p>Again I've tried to copy a feature of kedro package but tring to make it easier to use it.</p>
<p>I really like the way <strong>Pipelines</strong> and <strong>Nodes</strong> work in kedro, in particular the elegant way to pass input/output across different nodes.</p>
<p>You can use mine <code>Pipeline</code> and <code>Node</code> classes to accomplish the same but you can easily use them in your program without using kedro structure.</p>
<p>Here a dummy example:</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">clarkpy_essentials</span> <span class="kn">import</span> <span class="n">Pipeline</span><span class="p">,</span> <span class="n">Node</span><span class="p">,</span> <span class="n">Context</span>

<span class="c1"># ------------ Node fucntions --------------</span>
<span class="k">def</span> <span class="nf">prod</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
  <span class="k">return</span> <span class="n">x</span><span class="o">*</span><span class="n">y</span>


<span class="k">def</span> <span class="nf">sum</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
  <span class="n">reutrn</span> <span class="n">x</span><span class="o">+</span><span class="n">y</span>


<span class="c1"># ------------ Create Context --------------</span>
<span class="n">GLOBAL_VARIABLES</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;var1&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;var2&#39;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span> <span class="s1">&#39;var3&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">}</span>
<span class="n">context</span> <span class="o">=</span> <span class="n">Context</span><span class="p">(</span><span class="n">global_variables</span><span class="o">=</span><span class="n">GLOBAL_VARIABLES</span><span class="p">)</span>

<span class="c1"># ------------ Initialize Pipeline ---------</span>
<span class="n">pipeline</span> <span class="o">=</span> <span class="n">Pipeline</span><span class="p">([</span>
    <span class="n">Node</span><span class="p">(</span><span class="n">func</span><span class="o">=</span><span class="n">prod</span><span class="p">,</span>
         <span class="n">inputs</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;context.global_variables.var1&#39;</span><span class="p">,</span> <span class="s1">&#39;context.global_variables.var2&#39;</span><span class="p">],</span>
         <span class="n">outputs</span><span class="o">=</span><span class="s1">&#39;output_prod&#39;</span><span class="p">),</span>
    <span class="n">Node</span><span class="p">(</span><span class="n">func</span><span class="o">=</span><span class="nb">sum</span><span class="p">,</span>
         <span class="n">inputs</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;output_prod&#39;</span><span class="p">,</span> <span class="s1">&#39;context.global_variables.var3&#39;</span><span class="p">],</span>
         <span class="n">outputs</span><span class="o">=</span><span class="s1">&#39;outpout_sum&#39;</span><span class="p">)</span>
<span class="p">])</span>

<span class="c1"># ------------ Run Pipeline ----------------</span>
<span class="n">pipeline_results</span> <span class="o">=</span> <span class="n">pipeline</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">context</span><span class="o">=</span><span class="n">context</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;All pipeline variables&#39;</span><span class="p">,</span> <span class="n">pipeline_results</span><span class="p">)</span>
</code></pre></div>
<p>For more complex example have a look at mine <a href="https://github.com/clarkmaio/cookiecutter_template"><code>forecast</code> template</a>.</p>
<h2 id="datatransformer"><strong>DataTransformer</strong></h2>
<p>When dealing with multiple models it happens that different data processing are needed depending on the model you are using.</p>
<p>To make it easyier to control this operations I've created a class that take in input a list of instructions and transform a dataset accordingly.</p>
<p>Ideally you should create instructions (in the form of a <code>yaml</code>) for each model.</p>
<p>To use correctly this class you should:</p>
<ol>
<li>
<p>Write the functions to transform data using the template:</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">transformer_1</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="o">**</span><span class="n">kwars</span><span class="p">):</span>
    <span class="n">transform</span> <span class="n">X</span> <span class="n">some</span> <span class="n">how</span>
    <span class="k">return</span> <span class="n">X</span>

<span class="k">def</span> <span class="nf">transformer_2</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="o">**</span><span class="n">kwars</span><span class="p">):</span>
    <span class="n">transform</span> <span class="n">X</span> <span class="n">some</span> <span class="n">how</span>
    <span class="k">return</span> <span class="n">X</span>
</code></pre></div>
</li>
<li>
<p>Create an instance of <code>DataTransformer</code> and map the functions associating a label</p>
<div class="highlight"><pre><span></span><code><span class="n">dt</span> <span class="o">=</span> <span class="n">DataTransformer</span><span class="p">({</span>
    <span class="s1">&#39;t1&#39;</span><span class="p">:</span> <span class="n">trabsformer_1</span><span class="p">,</span>
    <span class="s1">&#39;t2&#39;</span><span class="p">:</span> <span class="n">transformer_2</span> 
<span class="p">})</span>
</code></pre></div>
</li>
<li>
<p>Create list of instructions.</p>
<p>Each instruction step must consist in a dictionary containing the keys:</p>
<ul>
<li><code>type</code>: label of the function to apply </li>
<li><code>kargs</code> [optional]: function kwargs</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="n">instructions</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span>
        <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;t1&#39;</span>
        <span class="s1">&#39;kargs&#39;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s1">&#39;kwarg1&#39;</span><span class="p">:</span> <span class="o">...</span><span class="p">,</span>
            <span class="s1">&#39;kwarg2&#39;</span><span class="p">:</span> <span class="o">...</span>
        <span class="p">}</span>
    <span class="p">},</span>

    <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;t2&#39;</span>
        <span class="s1">&#39;kargs&#39;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s1">&#39;kwarg1&#39;</span><span class="p">:</span> <span class="o">...</span><span class="p">,</span>
            <span class="s1">&#39;kwarg2&#39;</span><span class="p">:</span> <span class="o">...</span>
        <span class="p">}</span>
<span class="p">]</span>
</code></pre></div>
</li>
<li>
<p>Transform data
<div class="highlight"><pre><span></span><code><span class="n">X_transformed</span> <span class="o">=</span> <span class="n">dt</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">instructions</span><span class="o">=</span><span class="n">instructions</span><span class="p">)</span>
</code></pre></div></p>
</li>
</ol>
<p>Here a complete dummy example:</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">f1</span><span class="p">(</span><span class="n">X</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">X</span>

<span class="k">def</span> <span class="nf">f2</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">alpha</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">X</span><span class="o">*</span><span class="n">alpha</span>

<span class="n">dt</span> <span class="o">=</span> <span class="n">DataTransformer</span><span class="p">()</span>
<span class="n">dt</span><span class="o">.</span><span class="n">add_transformer_catalog</span><span class="p">({</span>
    <span class="s1">&#39;identity&#39;</span><span class="p">:</span> <span class="n">f1</span><span class="p">,</span>
    <span class="s1">&#39;mul&#39;</span><span class="p">:</span> <span class="n">f2</span>
<span class="p">})</span>


<span class="n">instructions</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span>
        <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;identity&#39;</span>
    <span class="p">},</span>

    <span class="p">{</span>
        <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;mul&#39;</span><span class="p">,</span>
        <span class="s1">&#39;kwargs&#39;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s1">&#39;alpha&#39;</span><span class="p">:</span> <span class="mi">2</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">]</span>


<span class="n">X</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">]</span>
<span class="n">X_transformed</span> <span class="o">=</span> <span class="n">dt</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">X</span><span class="o">=</span><span class="n">X</span><span class="p">,</span> <span class="n">instructions</span><span class="o">=</span><span class="n">instructions</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">X_transformed</span><span class="p">)</span>
</code></pre></div>
<h2 id="decorators"><strong>Decorators</strong></h2>
<ul>
<li><code>@force_kwargs</code>:  raise an error if function arguments are not passed through key.</li>
<li><code>@deepcopy_args</code>: deep copy args and kwargs passed to a function.</li>
</ul>
</section>

<section id="mkdocs-terminal-after-content">
    
</section>

            </main>
        </div>
        <hr><footer>
    <div class="terminal-mkdocs-footer-grid">
        <div id="terminal-mkdocs-footer-copyright-info">
             Site built with <a href="http://www.mkdocs.org">MkDocs</a> and <a href="https://github.com/ntno/mkdocs-terminal">Terminal for MkDocs</a>.
        </div>
    </div>
</footer>
    </div>

    
    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="alertdialog" aria-modal="true" aria-labelledby="searchModalLabel">
    <div class="modal-dialog modal-lg" role="search">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="searchModalLabel">Search</h5>
                <button type="button" class="close btn btn-default btn-ghost" data-dismiss="modal"><span aria-hidden="true">x</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p id="searchInputLabel">Type to start searching</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" aria-labelledby="searchInputLabel" placeholder="" id="mkdocs-search-query" title="Please enter search terms here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No document matches found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>
    
    
</body>

</html>